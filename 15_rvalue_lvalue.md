# Конспект 15. Rvalue, lvalue

## Lvalue
**lvalue** назван так исторически, так как он может находиться с левой стороны в операциях присвоения.
**lvalue** (левосторонние данные) – данные, которым можно присвоить какое-либо значение и адрес расположения этих данных в памяти можно получить используя оператор «&».
### Примеры
К левосторонним данным относятся:
1. Переменные
   ```c++ 
   int a = 5;
   double b = 2.7;
2. Ссылки (в момент явного приведения с созданием временной ссылки ((тип&)lvalue))
   ```c++
   int a = 5;
   (double&)a = 5.5;
3. Раскрытый указатель/адрес: 
   ```c++ 
   int *p = new int(23);
   *p = 5;
4. Нераскрытый указатель, если ему присваивается адрес:
   ```c++
   int a = 23;  int *p = new int(); int *q = new int();
   p = q;                        // Присваиваем адрес, присвоенный указателю q.
   p = &a;                       // Присваиваем адрес переменной.
   p = new int(5);               // Присваиваем адрес выделенной памяти.
   return 0;
5. Возвращаемое значение функции по ссылке, указателю
   ```c++
   int& f1(int& a)          { return a;  }                    // Возвращает ссылочную переменную.
   int* f2(int& a)          { return &a; }                    // Возвращает адрес, на который ссылается ссылка.
   int*& f3(int*& a)        { return a;  }                    // Возвращает ссылочную переменную указатель.


## Rvalue
rvalue назван так исторически, так как он может находиться с правой стороны в операциях присвоения. 
rvalue (правосторонние данные) – это данные, которые можно присвоить левосторонним данным и адрес расположения этих данных в памяти нельзя получить используя оператор «&».
Результатом всех выражений всегда есть rvalue. 

### Примеры
К правосторонним данным относятся:
1. Результат применения оператора &
   ```c++
   int a = 23;
   &a;              // Результат взятия адреса - правостороннее значение.
2. Приведение значения дает rvalue
   ```c++
   int i = 5;
   //(double)i = 23.23; // Ошибка. (double)i - приведение значения дает r-value.
   ```
   Исключение (VS2012): приведение значения к своему же типу дает l-value.
   ```c++
   int main()
   {
   int x = 23;
   const int &s = x;
   (int)s = 32;
   //(unsigned)s = 32; // Ошибка. Результатом приведения к другому типу является r-value.
   cout << x << endl;
   return 0;
   }
3. Результат вызова функции, тип возвращаемого значения которой не является ссылка
   ```c++ int r()                                   // Возвращает rvalue
   { return 0; }


Подробнее об rvalue и lvalue [тут](https://habr.com/ru/post/348198/), [тут](http://enotcpp.blogspot.com/2012/06/l-valuer-value.html) и [тут]().

